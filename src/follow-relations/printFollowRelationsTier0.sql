CREATE TEMP TABLE temp_remote_instances (host TEXT);
INSERT INTO temp_remote_instances VALUES
    ('076.ne.jp'),
    ('101010.pl'),
    ('10minutepleroma.com'),
    ('13bells.com'),
    ('1611.social'),
    ('4aem.com'),
    ('5dollah.click'),
    ('80percent.social'),
    ('8777.ch'),
    ('activitypub-proxy.cf'),
    ('activitypub-troll.cf'),
    ('adachi.party'),
    ('addy.gg'),
    ('adtension.com'),
    ('aethy.com'),
    ('agdersam.no'),
    ('ai.wiki'),
    ('alteregocreations.com'),
    ('ancreport.com'),
    ('ancreport.xyz'),
    ('angrytoday.com'),
    ('annihilation.social'),
    ('anon-kenkai.com'),
    ('asbestos.cafe'),
    ('asimon.org'),
    ('asteroidm.space'),
    ('ating.press'),
    ('badly.co'),
    ('bae.st'),
    ('banepo.st'),
    ('baraag.net'),
    ('bassam.social'),
    ('battlepenguin.video'),
    ('beefyboys.club'),
    ('beefyboys.win'),
    ('beepboop.ga'),
    ('berserker.town'),
    ('bgzashtita.es'),
    ('bikeshed.party'),
    ('birds.garden'),
    ('bitcointv.com'),
    ('blockedur.mom'),
    ('boymoder.biz'),
    ('brainsoap.net'),
    ('breastmilk.club'),
    ('brighteon.social'),
    ('burger.rodeo'),
    ('cachapa.xyz'),
    ('calobar.club'),
    ('campduffel.social'),
    ('cannibal.cafe'),
    ('carnivore.social'),
    ('catgirl.life'),
    ('catposter.club'),
    ('cawfee.club'),
    ('cdrom.tokyo'),
    ('childlove.su'),
    ('ckpg.space'),
    ('clew.lol'),
    ('clubcyberia.co'),
    ('clube.social'),
    ('contrapointsfan.club'),
    ('coolsite.win'),
    ('cottoncandy.cafe'),
    ('crlf.ninja'),
    ('crucible.world'),
    ('cryptotooter.com'),
    ('cum.camp'),
    ('cum.salon'),
    ('cunnyborea.space'),
    ('cyberretards.xyz'),
    ('cyberstorm.one'),
    ('danksquad.org'),
    ('daspr.io'),
    ('decayable.ink'),
    ('declin.eu'),
    ('dembased.xyz'),
    ('detroitriotcity.com'),
    ('dev-wiki.de'),
    ('d-fens.systems'),
    ('dickkickextremist.xyz'),
    ('dingdash.com'),
    ('djsumdog.com'),
    ('dobbs.town'),
    ('dotnet00.dev'),
    ('dragonpsi.xyz'),
    ('drow.be'),
    ('dtzbts.xyz'),
    ('ebin.club'),
    ('eientei.org'),
    ('emacs.ch'),
    ('endtimebelievers.com'),
    ('enjoyer.network'),
    ('epenguin.com'),
    ('epsilon.social'),
    ('eskimo.com'),
    ('eveningzoo.club'),
    ('ey.business'),
    ('fbxl.net'),
    ('federated.fun'),
    ('fedposters.club'),
    ('femboys.love'),
    ('feral.cafe'),
    ('fightthis.net'),
    ('firedragonstudios.com'),
    ('fluf.club'),
    ('foxgirl.lol'),
    ('fr13nd5.com'),
    ('freak.university'),
    ('freeatlantis.com'),
    ('freesoftwareextremist.com'),
    ('freespeech.club'),
    ('freespeechextremist.com'),
    ('freespeech.group'),
    ('freetalklive.com'),
    ('freethinkers.lgbt'),
    ('freezepeach.xyz'),
    ('frennet.xyz'),
    ('froth.zone'),
    ('gab.ai'),
    ('gabe.rocks'),
    ('gameliberty.club'),
    ('gamers.exposed'),
    ('gangstalking.services'),
    ('gearlandia.haus'),
    ('genderheretics.xyz'),
    ('gensokyo.club'),
    ('gentoo.live'),
    ('geofront.rocks'),
    ('ghetti.monster'),
    ('gleasonator.com'),
    ('glee.li'),
    ('glindr.org'),
    ('glowers.club'),
    ('gorf.pub'),
    ('goyim.app'),
    ('h5q.net'),
    ('haeder.net'),
    ('hallsofamenti.io'),
    ('handholding.io'),
    ('handicapped.tk'),
    ('hedgehoghunter.club'),
    ('helladoge.com'),
    ('hendrixgames.com'),
    ('hentai.baby'),
    ('hidamari.apartments'),
    ('hirad.it'),
    ('hitchhiker.social'),
    ('homd.xyz'),
    ('honkwerx.tech'),
    ('hornyjail.pro'),
    ('husk.site'),
    ('icod.de'),
    ('iddqd.social'),
    ('ignorelist.com'),
    ('imirhil.fr'),
    ('inferencium.net'),
    ('inumbra.xyz'),
    ('ironbug.org'),
    ('justbros.xyz'),
    ('kawa-kun.com'),
    ('kelarima.com'),
    ('kenhbit.com'),
    ('kitsunemimi.club'),
    ('kiwifarms.cc'),
    ('kiwifarms.is'),
    ('kiwifarms.net'),
    ('kompost.cz'),
    ('krackhou.se'),
    ('kurosawa.moe'),
    ('kyaruc.moe'),
    ('kys.moe'),
    ('lain.gay'),
    ('lain.la'),
    ('lain.sh'),
    ('leafposter.club'),
    ('letsalllovela.in'),
    ('liberdon.com'),
    ('librem.one'),
    ('librenet.co.za'),
    ('librosphere.fr'),
    ('ligma.pro'),
    ('logografos.com'),
    ('loli.church'),
    ('lolicon.rocks'),
    ('lolicon.win'),
    ('lolison.network'),
    ('lolison.top'),
    ('longyap.name.my'),
    ('loveforlandlords.com'),
    ('lovingexpressions.net'),
    ('lucasvl.nl'),
    ('makemysarcophagus.com'),
    ('maladaptive.art'),
    ('mapsupport.de'),
    ('marsey.club'),
    ('mastertibbles.co.uk'),
    ('masthead.social'),
    ('mastinator.com'),
    ('mastodon.cf'),
    ('mastodong.lol'),
    ('mastodon.la'),
    ('mastodon.se'),
    ('meld.de'),
    ('meme.moe'),
    ('merovingian.club'),
    ('midnightride.rs'),
    ('midwaytrades.com'),
    ('miku-enthusiast.club'),
    ('milker.cafe'),
    ('minds.com'),
    ('minidisc.tokyo'),
    ('mirr0r.city'),
    ('misono-ya.info'),
    ('misskey-forkbomb.cf'),
    ('mitra.social'),
    ('mooo.com'),
    ('morale.ch'),
    ('mostr.pub'),
    ('mouse.services'),
    ('mrhands.horse'),
    ('mstdn.jp'),
    ('mugicha.club'),
    ('mulmeyun.church'),
    ('nalocal519.social'),
    ('narrativerry.xyz'),
    ('natehiggers.online'),
    ('nationalist.social'),
    ('nazi.social'),
    ('needs.vodka'),
    ('neenster.org'),
    ('nekocave.xyz'),
    ('nicecrew.digital'),
    ('nightshift.social'),
    ('niscii.xyz'),
    ('nixnet.social'),
    ('nnia.cc'),
    ('nnia.space'),
    ('noagendasocial.com'),
    ('noagendasocial.nl'),
    ('noagendatube.com'),
    ('noauthority.social'),
    ('nobodyhasthe.biz'),
    ('normie.cafe'),
    ('norwoodzero.net'),
    ('novoa.nagoya'),
    ('nyanide.com'),
    ('occultist.space'),
    ('oddballs.online'),
    ('onionfarms.org'),
    ('otakufarms.com'),
    ('oti.st'),
    ('outerkosm.us'),
    ('outrnat.nl'),
    ('parcero.bond'),
    ('pawlicker.com'),
    ('pawoo.net'),
    ('paypig.org'),
    ('pedo.school'),
    ('peervideo.club'),
    ('pettanko.art'),
    ('piazza.today'),
    ('pibvt.net'),
    ('pieville.net'),
    ('pisskey.io'),
    ('pizzaf.art'),
    ('pkteerium.xyz'),
    ('plagu.ee'),
    ('poa.st'),
    ('poast.org'),
    ('poast.tv'),
    ('polaris-1.work'),
    ('pone.social'),
    ('pooper.social'),
    ('poridge.club'),
    ('poster.place'),
    ('poweredbycocaine.com'),
    ('press.coop'),
    ('preteengirls.biz'),
    ('privex.social'),
    ('prospeech.space'),
    ('pseudo-whiskey.bar'),
    ('psion.co'),
    ('pube.tk'),
    ('quanta.wiki'),
    ('quodverum.com'),
    ('r18.social'),
    ('raccoon.quest'),
    ('rage.lol'),
    ('rakket.app'),
    ('rapefeminists.network'),
    ('rapemeat.express'),
    ('rapemeat.solutions'),
    ('rape.pet'),
    ('rayci.st'),
    ('rcsocial.net'),
    ('rebelbase.site'),
    ('repl.co'),
    ('republic.red'),
    ('rot.gives'),
    ('roysbeer.place'),
    ('ruinouspowe.rs'),
    ('ryona.agency'),
    ('sad.cab'),
    ('satoshishop.de'),
    ('saynoto.lgbt'),
    ('schwartzwelt.xyz'),
    ('scots.network'),
    ('seal.cafe'),
    ('shadowsocial.org'),
    ('sharivegas.com'),
    ('shaw.app'),
    ('sheep.network'),
    ('shigusegubu.club'),
    ('shitpost.cloud'),
    ('shitposter.club'),
    ('shortstacksran.ch'),
    ('shota.house'),
    ('shota.social'),
    ('shotatube.xyz'),
    ('shpposter.club'),
    ('shrimpcam.pw'),
    ('shrimpposter.club'),
    ('silliness.observer'),
    ('skinheads.eu'),
    ('skinheads.io'),
    ('skinheads.social'),
    ('skinheads.uk'),
    ('skippers-bin.com'),
    ('skyshanty.xyz'),
    ('slash.cl'),
    ('sleepy.cafe'),
    ('smuglo.li'),
    ('sneak.berlin'),
    ('sneed.social'),
    ('someotherguy.xyz'),
    ('sonichu.com'),
    ('soykaf.com'),
    ('spinster.xyz'),
    ('springbo.cc'),
    ('starnix.network'),
    ('staycuriousandkeepsmil.in'),
    ('stereophonic.space'),
    ('strelizia.net'),
    ('supernets.social'),
    ('taihou.website'),
    ('takesama.com'),
    ('tastingtraffic.net'),
    ('teci.world'),
    ('terrible.place'),
    ('theapex.social'),
    ('thebag.social'),
    ('thechimp.zone'),
    ('thenobody.club'),
    ('thepostearthdestination.com'),
    ('theres.life'),
    ('tkammer.de'),
    ('tooters.fun'),
    ('touha.me'),
    ('troll.cafe'),
    ('trumpislovetrumpis.life'),
    ('truthsocial.co.in'),
    ('tyil.nl'),
    ('ua-fediland.de'),
    ('umbrellix.org'),
    ('unbound.social'),
    ('unperson.us'),
    ('unsafe.space'),
    ('ursal.zone'),
    ('urspringer.de'),
    ('usualsuspects.lol'),
    ('uwu.social'),
    ('vampiremaid.cafe'),
    ('varishangout.net'),
    ('vladtepesblog.com'),
    ('vrij.social'),
    ('vtuberfan.social'),
    ('wagesofsinisdeath.com'),
    ('waifuism.life'),
    ('weeaboo.space'),
    ('whinge.house'),
    ('whinge.town'),
    ('whitewomen.dog'),
    ('wideboys.org'),
    ('wikileaks2.org'),
    ('wolfgirl.bar'),
    ('workers.dev'),
    ('writehere.is'),
    ('xhais.love'),
    ('xmrposter.club'),
    ('xn--p1abe3d.xn--80asehdb'),
    ('yggdrasil.social'),
    ('youjo.love'),
    ('zhub.link')
;

SELECT
    CASE WHEN f1.host is null
        THEN f1.username
        ELSE CONCAT(f1.username, '@', f1.host)
    END as follower,
    CASE WHEN f2.host is null
        THEN f2.username
        ELSE CONCAT(f2.username, '@', f2.host)
    END as followee
FROM following
JOIN temp_remote_instances ri ON
    "followerHost" = ri.host
    OR "followeeHost" = ri.host
JOIN "user" f1 ON f1.id = "followerId"
JOIN "user" f2 ON f2.id = "followeeId"
ORDER BY
    follower,
    followee;

DROP TABLE temp_remote_instances;
